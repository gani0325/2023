"""
[15683] Í∞êÏãú

üíõ Î¨∏Ï†ú
Ïä§ÌÉÄÌä∏ÎßÅÌÅ¨Ïùò ÏÇ¨Î¨¥Ïã§ÏùÄ 1√ó1ÌÅ¨Í∏∞Ïùò Ï†ïÏÇ¨Í∞ÅÌòïÏúºÎ°ú ÎÇòÎàÑÏñ¥Ï†∏ ÏûàÎäî N√óM ÌÅ¨Í∏∞Ïùò ÏßÅÏÇ¨Í∞ÅÌòïÏúºÎ°ú ÎÇòÌÉÄÎÇº Ïàò ÏûàÎã§.
ÏÇ¨Î¨¥Ïã§ÏóêÎäî Ï¥ù KÍ∞úÏùò CCTVÍ∞Ä ÏÑ§ÏπòÎêòÏñ¥Ï†∏ ÏûàÎäîÎç∞, CCTVÎäî 5Í∞ÄÏßÄ Ï¢ÖÎ•òÍ∞Ä ÏûàÎã§

Í∞Å CCTVÍ∞Ä Í∞êÏãúÌï† Ïàò ÏûàÎäî Î∞©Î≤ïÏùÄ Îã§ÏùåÍ≥º Í∞ôÎã§.
    1Î≤à CCTVÎäî Ìïú Ï™Ω Î∞©Ìñ•Îßå Í∞êÏãúÌï† Ïàò ÏûàÎã§.
    2Î≤àÍ≥º 3Î≤àÏùÄ Îëê Î∞©Ìñ•ÏùÑ Í∞êÏãúÌï† Ïàò ÏûàÎäîÎç∞, 2Î≤àÏùÄ Í∞êÏãúÌïòÎäî Î∞©Ìñ•Ïù¥ ÏÑúÎ°ú Î∞òÎåÄÎ∞©Ìñ•Ïù¥Ïñ¥Ïïº ÌïòÍ≥†,
    3Î≤àÏùÄ ÏßÅÍ∞Å Î∞©Ìñ•Ïù¥Ïñ¥Ïïº ÌïúÎã§.
    4Î≤àÏùÄ ÏÑ∏ Î∞©Ìñ•,
    5Î≤àÏùÄ ÎÑ§ Î∞©Ìñ•ÏùÑ Í∞êÏãúÌï† Ïàò ÏûàÎã§.

CCTVÎäî Í∞êÏãúÌï† Ïàò ÏûàÎäî Î∞©Ìñ•Ïóê ÏûàÎäî Ïπ∏ Ï†ÑÏ≤¥Î•º Í∞êÏãúÌï† Ïàò ÏûàÎã§.
ÏÇ¨Î¨¥Ïã§ÏóêÎäî Î≤ΩÏù¥ ÏûàÎäîÎç∞, CCTVÎäî Î≤ΩÏùÑ ÌÜµÍ≥ºÌï† Ïàò ÏóÜÎã§.
CCTVÍ∞Ä Í∞êÏãúÌï† Ïàò ÏóÜÎäî ÏòÅÏó≠ÏùÄ ÏÇ¨Í∞ÅÏßÄÎåÄÎùºÍ≥† ÌïúÎã§.

CCTVÎäî ÌöåÏ†ÑÏãúÌÇ¨ Ïàò ÏûàÎäîÎç∞, ÌöåÏ†ÑÏùÄ Ìï≠ÏÉÅ 90ÎèÑ Î∞©Ìñ•ÏúºÎ°ú Ìï¥Ïïº ÌïòÎ©∞,
Í∞êÏãúÌïòÎ†§Í≥† ÌïòÎäî Î∞©Ìñ•Ïù¥ Í∞ÄÎ°ú ÎòêÎäî ÏÑ∏Î°ú Î∞©Ìñ•Ïù¥Ïñ¥Ïïº ÌïúÎã§.

ÏßÄÎèÑÏóêÏÑú 0ÏùÄ Îπà Ïπ∏, 6ÏùÄ Î≤Ω, 1~5Îäî CCTVÏùò Î≤àÌò∏Ïù¥Îã§.

ÏÇ¨Î¨¥Ïã§Ïùò ÌÅ¨Í∏∞ÏôÄ ÏÉÅÌÉú, Í∑∏Î¶¨Í≥† CCTVÏùò Ï†ïÎ≥¥Í∞Ä Ï£ºÏñ¥Ï°åÏùÑ Îïå, CCTVÏùò Î∞©Ìñ•ÏùÑ Ï†ÅÏ†àÌûà Ï†ïÌï¥ÏÑú,
ÏÇ¨Í∞Å ÏßÄÎåÄÏùò ÏµúÏÜå ÌÅ¨Í∏∞Î•º Íµ¨ÌïòÎäî ÌîÑÎ°úÍ∑∏Îû®ÏùÑ ÏûëÏÑ±ÌïòÏãúÏò§.

üíö ÏûÖÎ†•
Ï≤´Ïß∏ Ï§ÑÏóê ÏÇ¨Î¨¥Ïã§Ïùò ÏÑ∏Î°ú ÌÅ¨Í∏∞ NÍ≥º Í∞ÄÎ°ú ÌÅ¨Í∏∞ MÏù¥ Ï£ºÏñ¥ÏßÑÎã§. (1 ‚â§ N, M ‚â§ 8)
ÎëòÏß∏ Ï§ÑÎ∂ÄÌÑ∞ NÍ∞úÏùò Ï§ÑÏóêÎäî ÏÇ¨Î¨¥Ïã§ Í∞Å Ïπ∏Ïùò Ï†ïÎ≥¥Í∞Ä Ï£ºÏñ¥ÏßÑÎã§. 0ÏùÄ Îπà Ïπ∏, 6ÏùÄ Î≤Ω, 1~5Îäî CCTVÎ•º ÎÇòÌÉÄÎÇ¥Í≥†, Î¨∏Ï†úÏóêÏÑú ÏÑ§Î™ÖÌïú CCTVÏùò Ï¢ÖÎ•òÏù¥Îã§.
CCTVÏùò ÏµúÎåÄ Í∞úÏàòÎäî 8Í∞úÎ•º ÎÑòÏßÄ ÏïäÎäîÎã§.

üíô Ï∂úÎ†•
Ï≤´Ïß∏ Ï§ÑÏóê ÏÇ¨Í∞Å ÏßÄÎåÄÏùò ÏµúÏÜå ÌÅ¨Í∏∞Î•º Ï∂úÎ†•ÌïúÎã§.
"""

import queue

# ÏÇ¨Î¨¥Ïã§ n * m
n, m = map(int, input().split())

# ÏÇ¨Î¨¥Ïã§ Í∞Å Ïπ∏Ïùò Ï†ïÎ≥¥
office = []
for _ in range(n):
    # [[0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 1, 0, 6, 0], [0, 0, 0, 0, 0, 0]]
    office.append(list(map(int, input().split())))
# [[0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0], [0, 0, 0, 0, 0, 0]]
cctv = [[0] * m for _ in range(n)]
print(cctv)
dir1 = [(0, 1), (0, -1), (1, 0), (-1, 0)]
dir2 = [[(0, 1), (0, -1)], [(1, 0), (-1, 0)]]
dir3 = [[(0, 1), (-1, 0)], [(0, 1), (1, 0)],
        [(0, -1), (1, 0)], [(0, -1), (-1, 0)]]
dir4 = [[(0, 1), (0, -1), (-1, 0)], [(0, 1), (-1, 0), (1, 0)],
        [(0, 1), (0, -1), (1, 0)], [(0, -1), (-1, 0), (1, 0)]]
dir5 = [(0, 1), (0, -1), (1, 0), (-1, 0)]


def in_range(nx, ny):
    # Î≤îÏúÑ Î∞ñÏù¥Î©¥ 0 return
    return 0 >= nx or nx > n or 0 >= ny or ny > m


def cnt_cctv(cctv):
    cnt = 0
    for i in range(n):
        for j in range(m):
            if cctv[i][j] == "#":
                cnt += 1
    return cnt


temp = []

max_cnt = 0
for i in range(n):
    for j in range(m):
        cnt = 0
        queue = queue()
        # cctv Ï¢ÖÎ•ò 1 ~ 6
        if office[i][j] == 1:
            for k in range(len(dir1)):
                x = i + dir1[k][0]
                y = j + dir1[k][1]
                queue.append((x, y))

                while (queue):
                    nx, ny = queue.pop()
                    if (in_range(nx, ny) == 0):
                        break
                    # Îπà Í≥µÍ∞ÑÏù¥Í±∞ÎÇò Ïù¥ÎØ∏ Í∞êÏãú ÏòÅÏó≠Ïù∏ Í≤ΩÏö∞
                    if office[nx][ny] == 0 or office[nx][ny] == "#":
                        cctv[nx][ny] = "#"

                        # ÌïúÏπ∏ Îçî Ï†ÑÏßÑ
                        nx = nx + dir1[k][0]
                        ny = ny + dir1[k][1]
                        queue.append((nx, ny))
            max_cnt = max(cnt, cnt_cctv(cctv))

        if office[i][j] == 2:
            for k in range(len(dir1)):
                for p in range(len(dir1[k])):
                    x = i + dir2[k][p][0]
                    y = j + dir2[k][p][1]
                    queue.append((x, y))

                    while (queue):
                        nx, ny = queue.pop()
                        if (in_range(nx, ny) == 0):
                            break
                        # Îπà Í≥µÍ∞ÑÏù¥Í±∞ÎÇò Ïù¥ÎØ∏ Í∞êÏãú ÏòÅÏó≠Ïù∏ Í≤ΩÏö∞
                        if office[nx][ny] == 0 or office[nx][ny] == "#":
                            cctv[nx][ny] = "#"

                            # ÌïúÏπ∏ Îçî Ï†ÑÏßÑ
                            x = i + dir2[k][p][0]
                            y = j + dir2[k][p][1]
                            queue.append((nx, ny))

        if office[i][j] == 3:
            for k in range(len(dir1)):
                for p in range(len(dir1[k])):
                    x = i + dir3[k][p][0]
                    y = j + dir3[k][p][1]
                    queue.append((x, y))

                    while (queue):
                        nx, ny = queue.pop()
                        if (in_range(nx, ny) == 0):
                            break
                        # Îπà Í≥µÍ∞ÑÏù¥Í±∞ÎÇò Ïù¥ÎØ∏ Í∞êÏãú ÏòÅÏó≠Ïù∏ Í≤ΩÏö∞
                        if office[nx][ny] == 0 or office[nx][ny] == "#":
                            cctv[nx][ny] = "#"

                            # ÌïúÏπ∏ Îçî Ï†ÑÏßÑ
                            x = i + dir3[k][p][0]
                            y = j + dir3[k][p][1]
                            queue.append((nx, ny))

        if office[i][j] == 4:
            for k in range(len(dir1)):
                for p in range(len(dir1[k])):
                    x = i + dir4[k][p][0]
                    y = j + dir4[k][p][1]
                    queue.append((x, y))

                    while (queue):
                        nx, ny = queue.pop()
                        if (in_range(nx, ny) == 0):
                            break
                        # Îπà Í≥µÍ∞ÑÏù¥Í±∞ÎÇò Ïù¥ÎØ∏ Í∞êÏãú ÏòÅÏó≠Ïù∏ Í≤ΩÏö∞
                        if office[nx][ny] == 0 or office[nx][ny] == "#":
                            cctv[nx][ny] = "#"

                            # ÌïúÏπ∏ Îçî Ï†ÑÏßÑ
                            x = i + dir4[k][p][0]
                            y = j + dir4[k][p][1]
                            queue.append((nx, ny))
