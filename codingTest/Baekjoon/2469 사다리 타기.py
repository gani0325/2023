"""
[2469] ì‚¬ë‹¤ë¦¬ íƒ€ê¸°

ğŸ’› ë¬¸ì œ
këª…ì˜ ì°¸ê°€ìë“¤ì´ ì‚¬ë‹¤ë¦¬ íƒ€ê¸°ë¥¼ í†µí•˜ì—¬ ì–´ë–¤ ìˆœì„œë¥¼ ê²°ì •í•œë‹¤.
ì°¸ê°€ìë“¤ì€ ì•ŒíŒŒë²³ ëŒ€ë¬¸ì ì²« kê°œë¡œ í‘œí˜„ë˜ë©°,
ì‚¬ë‹¤ë¦¬ íƒ€ê¸°ë¥¼ ì‹œì‘í•  ë•Œì˜ ìˆœì„œëŠ” ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ì´ í•­ìƒ ì•ŒíŒŒë²³ ìˆœì„œëŒ€ë¡œì´ë‹¤.

k=10 ì¸ ì˜ˆë¥¼ ë“¤ì–´ ë³´ì.
10ëª…ì˜ A, B, C, D, E, F, G, H, I, J ì°¸ê°€ìë“¤ì´ ì‚¬ë‹¤ë¦¬ íƒ€ê¸°ë¥¼ ì¤€ë¹„í•œë‹¤.

ì•„ë˜ ê·¸ë¦¼ì€ 10ê°œì˜ ì„¸ë¡œ ì¤„ê³¼ 5ê°œì˜ ê°€ë¡œ ì¤„ì„ ê°€ì§€ê³  ìˆëŠ” ì‚¬ë‹¤ë¦¬ì˜ í•œ ì˜ˆë¥¼ ë³´ì—¬ì£¼ê³  ìˆë‹¤.

ì´ ì‚¬ë‹¤ë¦¬ì—ì„œ ì ì„ ì€ ê°€ë¡œ ë§‰ëŒ€ê°€ ì—†ìŒì„, êµµì€ ê°€ë¡œ ì‹¤ì„ ì€ ì˜†ìœ¼ë¡œ ê±´ë„ˆê°ˆ ìˆ˜ ìˆëŠ” ê°€ë¡œ ë§‰ëŒ€ê°€ ìˆìŒ
ì œì‹œëœ ì‚¬ë‹¤ë¦¬ë¥¼ íƒ€ë©´ ê·¸ ìµœì¢… ë„ë‹¬ëœ ìˆœì„œëŠ” ì™¼ìª½ìœ¼ë¡œë¶€í„° A, C, G, B, E, D, J, F, I, H ê°€ ëœë‹¤.

ì‚¬ë‹¤ë¦¬ íƒ€ê¸°ëŠ” ì„¸ë¡œ ë§‰ëŒ€ë¥¼ íƒ€ê³  ë‚´ë ¤ì˜¤ëŠ” ì¤‘ì— ê°€ë¡œë§‰ëŒ€ë¥¼ ë§Œë‚˜ë©´ ê·¸ ìª½ìœ¼ë¡œ ì˜®ê²¨ ê°€ë©´ì„œ ëê¹Œì§€ ë‚´ë ¤ê°€ëŠ” ê³¼ì •ì´ë‹¤.
ì‚¬ë‹¤ë¦¬ íƒ€ê¸°ì˜ ê·œì¹™ íŠ¹ì„±ìƒ ë‘ ê°€ë¡œ ë§‰ëŒ€ê°€ ì§ì ‘ ì—°ê²°ë  ìˆ˜ëŠ” ì—†ìœ¼ë¯€ë¡œ ì´ ìƒí™©ì€ ì´ ë¬¸ì œì—ì„œ ê³ ë ¤í•  í•„ìš”ê°€ ì—†ë‹¤.

ìš°ë¦¬ëŠ” í•˜ë‚˜ì˜ ê°€ë¡œ ì¤„ì´ ê°ì¶”ì–´ì§„ ì‚¬ë‹¤ë¦¬ë¥¼ ë°›ì•„ì„œ
ê·¸ ì¤„ì˜ ê° ì¹¸ì— ê°€ë¡œ ë§‰ëŒ€ë¥¼ ì ì ˆíˆ ë„£ì–´ì„œ ì°¸ê°€ìë“¤ì˜ ìµœì¢… ìˆœì„œê°€ ì›í•˜ëŠ” ìˆœì„œëŒ€ë¡œ ë‚˜ì˜¤ë„ë¡ ë§Œë“¤ë ¤ê³  í•œë‹¤.

ì…ë ¥ì—ì„œ ì‚¬ë‹¤ë¦¬ì˜ ì „ì²´ ëª¨ì–‘ì€ ê° ì¤„ì— ìˆëŠ” ê°€ë¡œ ë§‰ëŒ€ì˜ ìœ ë¬´ë¡œ í‘œí˜„ëœë‹¤.
ê° ì¤„ì—ì„œ ê°€ë¡œ ë§‰ëŒ€ê°€ ì—†ëŠ” ê²½ìš°ì—ëŠ” â€˜*â€™(ë³„)ë¬¸ì, ìˆì„ ê²½ìš°ì—ëŠ” â€˜-â€™(ë¹¼ê¸°) ë¬¸ìë¡œ í‘œì‹œëœë‹¤.
ê·¸ë¦¬ê³  ê°ì¶”ì–´ì§„ íŠ¹ì • ê°€ë¡œ ì¤„ì€ ê¸¸ì´ k-1ì¸ â€˜?â€™ (ë¬¼ìŒí‘œ) ë¬¸ìì—´ë¡œ í‘œì‹œë˜ì–´ ìˆë‹¤.

ğŸ’š ì…ë ¥
ì²« ì¤„ì—ëŠ” ì°¸ê°€í•œ ì‚¬ëŒì˜ ìˆ˜ kê°€ ë‚˜ì˜¨ë‹¤(3 â‰¤ k â‰¤ 26).
ê·¸ ë‹¤ìŒ ì¤„ì—ëŠ” ê°€ë¡œ ë§‰ëŒ€ê°€ ë†“ì¼ ì „ì²´ ê°€ë¡œ ì¤„ì˜ ìˆ˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” nì´ ë‚˜ì˜¨ë‹¤(3 â‰¤ n â‰¤ 1,000).
ì„¸ ë²ˆì§¸ ì¤„ì—ëŠ” ì‚¬ë‹¤ë¦¬ë¥¼ íƒ€ê³  ë‚œ í›„ ê²°ì •ëœ ì°¸ê°€ìë“¤ì˜ ìµœì¢… ìˆœì„œê°€ ê¸¸ì´ kì¸ ëŒ€ë¬¸ì ë¬¸ìì—´ë¡œ ë“¤ì–´ì˜¨ë‹¤.
ì´ì–´ì§€ëŠ” nê°œì˜ ì¤„ì—ëŠ” ì•ì„œ ì„¤ëª…í•œ ë°”ì™€ ê°™ì´ â€˜*â€™ì™€ â€˜-â€™ ë¬¸ìë¡œ ì´ë£¨ì–´ì§„ ê¸¸ì´ k-1ì¸ ë¬¸ìì—´ì´ ì£¼ì–´ì§„ë‹¤.
ê·¸ ì¤‘ ê°ì¶”ì–´ì§„ ê°€ë¡œ ì¤„ì€ ê¸¸ì´ê°€ k-1ì¸ â€˜?â€™ ë¬¸ìì—´ë¡œ í‘œì‹œë˜ì–´ ìˆë‹¤.

ğŸ’™ ì¶œë ¥
ì…ë ¥ íŒŒì¼ ì„¸ ë²ˆì§¸ ì¤„ì—ì„œ ì§€ì •í•œ ë„ì°©ìˆœì„œê°€ í•´ë‹¹ ì‚¬ë‹¤ë¦¬ì—ì„œ ë§Œë“¤ì–´ì§ˆ ìˆ˜ ìˆë„ë¡ ê°ì¶”ì–´ì§„ ê°€ë¡œ ì¤„ì„ êµ¬ì„±í•´ì•¼ í•œë‹¤.
ê°ì¶”ì–´ì§„ ê°€ë¡œ ì¤„ì˜ ìƒíƒœë¥¼ ì¬êµ¬ì„±í•˜ì—¬ ì´ë¥¼ â€˜*â€™(ë³„) ë¬¸ìì™€ â€˜-â€™(ë¹¼ê¸°) ë¬¸ìë¡œ êµ¬ì„±ëœ ê¸¸ì´ k-1ì¸ ë¬¸ìì—´ë¡œ ë§Œë“¤ì–´ ì¶œë ¥í•˜ë©´ ëœë‹¤.

ê·¸ëŸ°ë° ì–´ë–¤ ê²½ìš°ì—ëŠ” ê·¸ ê°ì¶”ì–´ì§„ ê°€ë¡œ ì¤„ì„ ì–´ë–»ê²Œ êµ¬ì„±í•´ë„ ì›í•˜ëŠ” ìˆœì„œë¥¼ ì–»ì„ ìˆ˜ ì—†ëŠ” ê²½ìš°ë„ ìˆë‹¤.
ì´ ê²½ìš°ì—ëŠ”  â€˜xâ€™(ì†Œë¬¸ì ì—‘ìŠ¤)ë¡œ êµ¬ì„±ëœ ê¸¸ì´ k-1ì¸ ë¬¸ìì—´ì„ ì¶œë ¥í•´ì•¼ í•œë‹¤.
"""

# ì°¸ê°€í•œ ì‚¬ëŒì˜ ìˆ˜
k = int(input())
# ê°€ë¡œ ë§‰ëŒ€ê°€ ë†“ì¼ ì „ì²´ ê°€ë¡œ ì¤„ì˜ ìˆ˜
n = int(input())
# ì‚¬ë‹¤ë¦¬ë¥¼ íƒ€ê³  ë‚œ í›„ ê²°ì •ëœ ì°¸ê°€ìë“¤ì˜ ìµœì¢… ìˆœì„œê°€ ê¸¸ì´ (ëŒ€ë¬¸ì ë¬¸ì)
ladder = list(input())
# â€˜*â€™ì™€ â€˜-â€™ ë¬¸ìë¡œ ì´ë£¨ì–´ì§„ ê¸¸ì´ k-1ì¸ ë¬¸ìì—´
graph = []
for i in range(n):
    graph.append(list(input()))

up = [[-1] * k for _ in range(n)]
down = [[-1] * k for _ in range(n)]
for i in range(k):
    up[0][i] = i
    down[-1][i] = ord(ladder[i]) - 65


def up_ladder():
    for i in range(n):
        if (graph[i][0] == '?'):
            temp = up[i]
            return temp

        else:
            for j in range(k-1):
                if j > 0 and j < k - 2:
                    if (graph[i][j] == '-'):
                        up[i+1][j+1] = up[i][j]
                    elif (graph[i][j-1] == '-'):
                        up[i+1][j-1] = up[i][j]
                    else:
                        up[i+1][j] = up[i][j]
                elif j == k-2:
                    if (graph[i][j-1] == '-'):
                        up[i+1][j-1] = up[i][j]
                        up[i+1][j+1] = up[i][j+1]
                    elif (graph[i][j] == '-'):
                        up[i+1][j] = up[i][j+1]
                        up[i+1][j+1] = up[i][j]
                    else:
                        up[i+1][j+1] = up[i][j+1]
                        up[i+1][j] = up[i][j]
                else:
                    if (graph[i][j] == '-'):
                        up[i+1][j+1] = up[i][j]
                    else:
                        up[i+1][j] = up[i][j]


def down_ladder():
    temp = []
    for i in range(n-1, -1, -1):
        if (graph[i][0] == '?'):
            temp = down[i]
            return temp
        for j in range(k-1):
            if j > 0 and j < k - 2:
                if (graph[i][j] == '-'):
                    down[i-1][j+1] = down[i][j]
                elif (graph[i][j-1] == '-'):
                    down[i-1][j-1] = down[i][j]
                else:
                    down[i-1][j] = down[i][j]
            elif j == k-2:
                if (graph[i][j-1] == '-'):
                    down[i-1][j-1] = down[i][j]
                    down[i-1][j+1] = down[i][j+1]
                elif (graph[i][j] == '-'):
                    down[i-1][j] = down[i][j+1]
                    down[i-1][j+1] = down[i][j]
                else:
                    down[i-1][j+1] = down[i][j+1]
                    down[i-1][j] = down[i][j]
            elif j == 0:
                if (graph[i][j] == '-'):
                    down[i-1][j+1] = down[i][j]
                else:
                    down[i-1][j] = down[i][j]


up_temp = up_ladder()
down_temp = down_ladder()

answer = []
for i in range(k-1):
    if up_temp[i] == down_temp[i]:
        answer.append("*")
    else:
        # ë‹¤ë¦¬ ë†”ì£¼ê¸°
        if up_temp[i] == down_temp[i+1]:
            answer.append("-")
        # ì´ì–´ì£¼ê¸°
        elif i != 0 and up_temp[i] == down_temp[i-1]:
            answer.append("*")
        else:
            answer = ['x' for _ in range(k-1)]
            break

print(''.join(answer))
